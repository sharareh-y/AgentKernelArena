# ============================================================================
# GEAK-OptimAgentV2 Agent Configuration for AgentKernelArena
# ============================================================================
# This agent supports both TritonBench (Triton kernels) and ROCm (HIP kernels)
# task types. It auto-clones GEAK-agent if not present.

# ============================================================================
# GEAK-agent Path Configuration
# ============================================================================
# Custom path to GEAK-agent source (optional)
# Priority: 1. GEAK_AGENT_PATH env var, 2. This config, 3. Auto-clone to agent folder
# geak_agent_path: "/custom/path/to/GEAK-agent/src"
geak_agent_path: null

# ============================================================================
# LLM Configuration
# ============================================================================
llm:
  # API key - uses OPENAI_API_KEY or AMD_API_KEY env var if null
  api_key: null
  
  # Model selection
  # For AMD Claude API: "claude-sonnet-4", "claude-opus-4"
  # For OpenAI: "gpt-4o", "gpt-4o-mini"
  model_id: "claude-sonnet-4"
  
  # Temperature for generation (higher = more creative)
  temperature: 1.0

# ============================================================================
# Agent Parameters (shared by TritonBench and ROCm modes)
# ============================================================================
# Maximum optimization iterations
max_iteration: 5

# Enable multi-threaded generation
multi_thread: true

# Number of ancestor candidates to consider for optimization
ancestor_num: 5

# Number of descendant codes to generate per iteration
descendant_num: 2

# GPU device ID for testing
gpu_id: 0

# Minimum successful descendants before marking as passed
descendant_debug: 0

# Target GPU architecture (e.g., "MI325X", "MI250", "MI200")
target_gpu: "MI325X"
# TODO: launch_agent.py:1043 hardcodes the golden_metrics directory name as
#   "AMD_Instinct_MI300X_VF_golden_metrics". This path should be parameterized
#   by target_gpu so it resolves correctly on different GPU models (e.g. MI355X).

# Enable kernel profiling with rocprof-compute
profiling: true

# Enable performance analyzer (TritonBench only)
analyzer: false

# ============================================================================
# TritonBench Mode Settings (for triton2triton, instruction2triton tasks)
# ============================================================================
# Paths can be:
#   - Absolute: "/home/user/GEAK-eval/..."
#   - Relative to agent folder: "./GEAK-eval/..." (auto-cloned location)
#   - null: Skip that feature

tritonbench:
  # Path to statistics/instruction JSON file
  # Note: openevolve branch has tb_eval folder (not geak_eval)
  statis_path: "./GEAK-eval/tb_eval/data/TritonBench/data/TritonBench_G_comp_alpac_v1_fixed_with_difficulty.json"
  
  # Path to Python kernel files folder
  py_folder: "./GEAK-eval/tb_eval/data/TritonBench/data/TritonBench_G_v1"
  
  # Path to instruction JSON file (can be same as statis_path)
  instruction_path: "./GEAK-eval/tb_eval/data/TritonBench/data/TritonBench_G_comp_alpac_v1_fixed_with_difficulty.json"
  
  # Path to corpus for retrieval
  corpus_path: "./GEAK-eval/tb_eval/data/TritonBench/data/train_crawl.json"
  
  # Path to golden metrics for performance comparison
  golden_metrics: "./GEAK-eval/tb_eval/data/TritonBench/performance_metrics/perf_G/golden_metrics"
  
  # Path to performance reference folder
  perf_ref_folder: null
  
  # Path to performance data
  perf_G_path: "./GEAK-eval/tb_eval/data/TritonBench/performance_metrics/perf_G"

# ============================================================================
# ROCm Mode Settings (for hip2hip, cuda2hip, pytorch2hip tasks)
# ============================================================================
rocm:
  # Path to statistics JSON file
  statis_path: null
  
  # Path to Python/HIP files folder
  py_folder: null
  
  # Path to instruction JSON file
  instruction_path: null
  
  # Path to corpus for retrieval
  corpus_path: "./GEAK-eval/tb_eval/data/TritonBench/data/train_crawl.json"

